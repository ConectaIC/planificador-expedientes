'use client';
import { useState } from 'react';
export default function PartesPage(){const[saving,setSaving]=useState(false);const[msg,setMsg]=useState<string|null>(null);async function onSubmit(e:any){e.preventDefault();setSaving(true);setMsg(null);const form=new FormData(e.currentTarget);const payload=Object.fromEntries(form.entries());const res=await fetch('/api/partes',{method:'POST',body:JSON.stringify(payload)});const j=await res.json();setSaving(false);setMsg(j.ok?'Parte guardado':'Error: '+j.error);if(j.ok)(e.target as HTMLFormElement).reset();}
return(<main style={{padding:24}}><h2>Imputación de horas</h2><form onSubmit={onSubmit} style={{display:'grid',gap:8,maxWidth:420}}><label>Fecha <input type='date' name='fecha' required/></label><div style={{display:'grid',gridTemplateColumns:'1fr 1fr',gap:8}}><label>Inicio <input type='time' name='inicio'/></label><label>Fin <input type='time' name='fin'/></label></div><label>Horas <input type='number' step='0.25' name='horas' placeholder='1.5'/></label><label>Expediente <input name='expediente' placeholder='25.201ATG' required/></label><label>Comentario <input name='comentario' placeholder='Descripción breve'/></label><button disabled={saving} type='submit'>{saving?'Guardando...':'Guardar'}</button>{msg&&<p>{msg}</p>}</form></main>);}